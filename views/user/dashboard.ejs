<style>
    /* 1. ANIMATIONS */
    @keyframes gradient-xy {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }
    .animate-gradient { background-size: 200% 200%; animation: gradient-xy 15s ease infinite; }
    
    @keyframes float {
        0% { transform: translate(0px, 0px); }
        50% { transform: translate(0px, -20px); }
        100% { transform: translate(0px, 0px); }
    }
    .animate-float { animation: float 6s ease-in-out infinite; }

    /* 2. REVEAL EFFECT */
    .reveal { opacity: 0; transform: translateY(30px); transition: all 1s cubic-bezier(0.16, 1, 0.3, 1); }
    .reveal.active { opacity: 1; transform: translateY(0); }

    /* 3. BUTTON SHINE */
    @keyframes shine { 100% { left: 125%; } }
    .btn-shine { position: relative; overflow: hidden; }
    .btn-shine::after {
        content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: 0.5s;
    }
    .btn-shine:hover::after { animation: shine 1s; }
</style>

<div class="relative min-h-screen bg-slate-900 py-12 px-4 overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-slate-900 via-cyan-950 to-slate-900 animate-gradient opacity-90"></div>
    
    <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-cyan-500/10 rounded-full blur-[120px] pointer-events-none animate-float"></div>
    <div class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-blue-500/10 rounded-full blur-[120px] pointer-events-none animate-float" style="animation-delay: 2s;"></div>

    <div class="relative z-10 max-w-5xl mx-auto">
        
        <div class="bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 mb-12 flex flex-col md:flex-row items-center justify-between gap-6 shadow-2xl reveal">
            <div class="flex items-center gap-6">
                <div class="w-16 h-16 rounded-full bg-gradient-to-tr from-cyan-400 to-blue-500 flex items-center justify-center text-2xl font-bold text-white shadow-lg shadow-cyan-500/30">
                    <%= user.name.charAt(0).toUpperCase() %>
                </div>
                <div>
                    <h1 class="text-3xl font-black text-white">Hello, <%= user.name %> <span class="animate-pulse">ðŸ‘‹</span></h1>
                    <p class="text-cyan-200 mt-1 font-medium">Welcome to your recovery dashboard.</p>
                    <div class="inline-block mt-2 px-3 py-1 bg-white/10 rounded-full text-xs text-slate-300 border border-white/5">
                        <%= user.email %>
                    </div>
                </div>
            </div>
            <div>
                <a href="/book" class="btn-shine bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-8 py-4 rounded-xl font-bold hover:shadow-cyan-500/40 transition shadow-lg flex items-center gap-2 transform hover:-translate-y-1">
                    <span class="text-xl leading-none">+</span> New Booking
                </a>
            </div>
        </div>

        <div class="flex items-center gap-4 mb-8 reveal" style="transition-delay: 100ms;">
            <div class="h-10 w-2 bg-cyan-500 rounded-full"></div>
            <h2 class="text-2xl font-bold text-white">Your Upcoming Sessions</h2>
        </div>

        <% if (bookings.length === 0) { %>
            <div class="text-center py-20 bg-white/5 backdrop-blur-md rounded-3xl border border-dashed border-white/10 reveal" style="transition-delay: 200ms;">
                <div class="bg-white/5 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 ring-1 ring-white/10">
                    <span class="text-4xl">ðŸ“…</span>
                </div>
                <h3 class="text-xl font-bold text-white mb-2">No Bookings Found</h3>
                <p class="text-slate-400 mb-8 text-sm">You haven't booked any recovery sessions yet.</p>
                <a href="/book" class="text-cyan-400 font-bold hover:text-cyan-300 transition flex items-center justify-center gap-2 group">
                    Book your first session 
                    <span class="group-hover:translate-x-1 transition-transform">&rarr;</span>
                </a>
            </div>
        <% } else { %>
            <div class="grid gap-6">
                <% bookings.forEach((booking, index) => { %>
                    <div class="bg-white/5 backdrop-blur-md p-6 rounded-2xl border border-white/10 hover:border-cyan-500/30 hover:bg-white/10 transition-all duration-300 flex flex-col md:flex-row justify-between items-center group shadow-lg reveal" style="transition-delay: <%= 100 + (index * 100) %>ms;">
                        
                        <div class="flex items-center gap-8 w-full">
                            <div class="bg-gradient-to-b from-cyan-900/50 to-slate-900/50 p-4 rounded-2xl text-center min-w-[100px] border border-white/10 group-hover:border-cyan-500/30 transition-colors">
                                <span class="block text-xs uppercase font-bold text-cyan-400 tracking-wider mb-1">
                                    <%= new Date(booking.date).toLocaleString('default', { month: 'short' }) %>
                                </span>
                                <span class="block text-4xl font-black text-white mb-1">
                                    <%= new Date(booking.date).getDate() %>
                                </span>
                                <span class="block text-xs text-slate-400">
                                    <%= new Date(booking.date).getFullYear() %>
                                </span>
                            </div>

                            <div>
                                <h3 class="font-bold text-xl text-white group-hover:text-cyan-400 transition mb-2">
                                    Recovery Session
                                </h3>
                                <div class="text-slate-400 text-sm space-y-2">
                                    <p class="flex items-center gap-3">
                                        <span class="bg-white/10 p-1.5 rounded-lg text-xs">ðŸ•’</span> 
                                        <span class="font-mono text-cyan-100"><%= booking.timeSlot %></span>
                                    </p>
                                    <p class="flex items-center gap-3">
                                        <span class="bg-white/10 p-1.5 rounded-lg text-xs">ðŸ’³</span> 
                                        <span><%= booking.paymentMethod || 'Cash' %></span>
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 md:mt-0 w-full md:w-auto text-right">
                            <span class="
                                inline-flex items-center px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-widest shadow-lg
                                <%= booking.status === 'Confirmed' ? 'bg-green-500/20 text-green-300 border border-green-500/30' : 
                                   booking.status === 'Cancelled' ? 'bg-red-500/20 text-red-300 border border-red-500/30' : 
                                   'bg-yellow-500/20 text-yellow-300 border border-yellow-500/30' %>
                            ">
                                <span class="w-2 h-2 rounded-full mr-2 
                                    <%= booking.status === 'Confirmed' ? 'bg-green-400 animate-pulse' : 
                                       booking.status === 'Cancelled' ? 'bg-red-400' : 
                                       'bg-yellow-400 animate-pulse' %>">
                                </span>
                                <%= booking.status %>
                            </span>
                        </div>

                    </div>
                <% }) %>
            </div>
        <% } %>

    </div>
</div>

<script>
    // SCROLL REVEAL
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
    }, { threshold: 0.1 });
    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
</script>